<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Environment Check</title>
  <style>
    body { font-family: monospace; background: #1a1a1a; color: #0f0; padding: 20px; }
    .good { color: #0f0; }
    .bad { color: #f00; }
    pre { background: #000; padding: 15px; border: 1px solid #0f0; }
  </style>
</head>
<body>
<h1>ğŸ” Environment Variables Check</h1>
<pre id="output">Loading...</pre>
<script src="/config.js"></script>
<script>
const out = document.getElementById('output');

// Wait for config.js to load
setTimeout(() => {
  const config = window.APP_CONFIG || {};

  const useApi = config.USE_API;
  const teamId = config.TEAM_ID;
  const apiUrl = config.API_BASE_URL;
  const secret = config.SESSION_SECRET;
  const roles = config.ACTOR_ROLES;

  const apiOk = useApi === true;
  const teamOk = !!teamId;
  const allOk = apiOk && teamOk;

  out.innerHTML = `
<span class="${apiOk ? 'good' : 'bad'}">${apiOk ? 'âœ…' : 'âŒ'} USE_API: ${useApi !== undefined ? useApi : 'NOT SET'}</span>
<span class="${teamOk ? 'good' : 'bad'}">${teamOk ? 'âœ…' : 'âŒ'} TEAM_ID: ${teamId || 'NOT SET'}</span>
<span class="good">API_BASE_URL: ${apiUrl || 'NOT SET'}</span>
<span class="${secret ? 'good' : 'bad'}">${secret ? 'âœ…' : 'âŒ'} SESSION_SECRET: ${secret ? 'SET (' + secret.substring(0,10) + '...)' : 'NOT SET'}</span>
<span class="good">ACTOR_ROLES: ${roles ? roles.join(', ') : 'NOT SET'}</span>

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Runtime Config Source: window.APP_CONFIG
Loaded from: /config.js endpoint

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
<span class="${allOk ? 'good' : 'bad'}">
${allOk ? 'âœ…âœ…âœ… CONFIGURATION CORRECT!' : 'âŒ CONFIGURATION INCOMPLETE'}
${allOk ? 'App IS using API mode (PostgreSQL)' : 'App will use localStorage mode'}
${allOk ? 'Action: App should be fully functional!' : 'Action: Check Railway environment variables'}
</span>
`;
}, 100);
</script>
</body>
</html>
